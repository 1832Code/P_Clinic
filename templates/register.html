{% extends 'base.html' %}
{% block content %}
<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-xl-5 col-lg-6 col-md-8">
      <div class="card shadow-sm border-0 rounded-lg">
        <div class="card-header bg-gradient-primary text-white">
          <h3 class="text-center font-weight-light my-3">Registro de Usuario</h3>
        </div>
        <div class="card-body p-4">
          <form method="post" class="needs-validation" novalidate>
            <div class="form-floating mb-4">
              <input type="text" class="form-control" id="nombre" name="nombre" 
                     placeholder="Nombre completo" pattern="[A-Za-záéíóúñÁÉÍÓÚÑ\s]{2,}" required>
              <label for="nombre">Nombre completo</label>
              <div class="invalid-feedback">
                Por favor ingrese un nombre válido (mínimo 2 caracteres)
              </div>
            </div>
            
            <div class="form-floating mb-4">
              <input type="email" class="form-control" id="email" name="email" 
                     placeholder="nombre@ejemplo.com" required>
              <label for="email">Correo electrónico</label>
              <div class="invalid-feedback">
                Por favor ingrese un correo electrónico válido
              </div>
            </div>
            
            <div class="form-floating mb-4">
              <input type="password" class="form-control" id="password" name="password" 
                     placeholder="Contraseña" minlength="8" required>
              <label for="password">Contraseña</label>
              <div class="invalid-feedback">
                La contraseña debe tener al menos 8 caracteres
              </div>
              <div class="form-text">Mínimo 8 caracteres</div>
            </div>
            
            <div class="form-floating mb-4">
              <input type="password" class="form-control" id="confirm_password" name="confirm_password" 
                     placeholder="Confirmar contraseña" required>
              <label for="confirm_password">Confirmar contraseña</label>
              <div class="invalid-feedback">
                Las contraseñas deben coincidir
              </div>
            </div>
            
            <div class="d-grid gap-2">
              <button type="submit" class="btn btn-primary btn-lg py-3">
                <i class="bi bi-person-plus me-2"></i>Registrarse
              </button>
            </div>
            
            <div class="mt-4 text-center">
              <p class="mb-0">Al registrarte, aceptas nuestros 
                <a href="#" class="text-decoration-none">Términos y Condiciones</a>
              </p>
            </div>
          </form>
        </div>
        <div class="card-footer bg-transparent text-center py-3">
          <p class="mb-0">¿Ya tienes cuenta? 
            <a href="{{ url_for('login') }}" class="text-decoration-none fw-bold">Inicia sesión</a>
          </p>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .card {
    border: none;
    box-shadow: 0 0.5rem 1.5rem rgba(0, 0, 0, 0.1);
    transition: transform 0.3s ease;
  }
  .card:hover {
    transform: translateY(-5px);
  }
  .bg-gradient-primary {
    background: linear-gradient(135deg, #3a7bd5 0%, #00d2ff 100%);
  }
  .form-floating>label {
    padding: 1rem 0.75rem;
    color: #6c757d;
  }
  .form-control:focus {
    box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
  }
  .btn-primary {
    background-color: #3a7bd5;
    border: none;
    letter-spacing: 0.5px;
  }
  .btn-primary:hover {
    background-color: #2c65b4;
  }
</style>

<script>
  // Password confirmation validation
  document.addEventListener('DOMContentLoaded', function() {
    const password = document.getElementById('password');
    const confirm_password = document.getElementById('confirm_password');
    
    function validatePassword() {
      if(password.value !== confirm_password.value) {
        confirm_password.setCustomValidity("Las contraseñas no coinciden");
      } else {
        confirm_password.setCustomValidity('');
      }
    }
    
    password.onchange = validatePassword;
    confirm_password.onkeyup = validatePassword;
    
    // Bootstrap validation
    (function () {
      'use strict'
      var forms = document.querySelectorAll('.needs-validation')
      Array.prototype.slice.call(forms)
        .forEach(function (form) {
          form.addEventListener('submit', function (event) {
            if (!form.checkValidity()) {
              event.preventDefault()
              event.stopPropagation()
            }
            form.classList.add('was-validated')
          }, false)
        })
    })()
  });
</script>
{% endblock %}